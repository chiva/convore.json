[{"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304322868.104382, "message": "At any time, you can see the size of the repo that will be copied over with the command 'du -h .git'", "group_id": 9127, "id": 881338}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304322627.479377, "message": "The instructions at (http://help.github.com/removing-sensitive-data/) have a good description of what we are trying to do.  However, the top solution at (http://stackoverflow.com/questions/2164581/remove-file-from-git-repository-history) is actually more effective.", "group_id": 9127, "id": 881326}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304323131.031693, "message": "Of course, if the majority of code from a repo is going to be migrated into PyNE, you probably don't need to worry about reducing repository size at all. Just merge everything in.  This is very easy to do.", "group_id": 9127, "id": 881355}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304323316.797473, "message": "Also, if you just want me to merge a repo in-full into PyNE, let me know and I'll be happy to take care of it.", "group_id": 9127, "id": 881368}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304322156.425658, "message": "Now that the framework project is up on github (https://github.com/pyne/pyne),  I figured I'd post some instructions on how to merge other repos into PyNE.  Note:  All merges should happen on the staging branch.  (Everything on master should go through some code review process.)", "group_id": 9127, "id": 881312}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304322998.949564, "message": "The script posted at (http://stubbisms.wordpress.com/2009/07/10/git-script-to-show-largest-pack-objects-and-trim-your-waist-line/) is very useful for figuring out with objects in your repo are the largest.  This gives you nice pointers for which files you should remove.  (NOTE: you can remove files from the repo that are no longer on the current working tree.)", "group_id": 9127, "id": 881344}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304322545.324775, "message": "However, the above will merge the entire foreign repo's history.  This is inefficient if you only want a couple of files.  Unfortunately, you need to delete more than just the files and the commits to reduce repository size.  You need to remove the git objects.", "group_id": 9127, "id": 881323}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304322222.585433, "message": "First, the process of merging another repo into a sub-directory of the current repo is rather easy.   The four commands you need are at (http://www.kernel.org/pub/software/scm/git/docs/howto/using-merge-subtree.html)", "group_id": 9127, "id": 881313}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304322852.7742021, "message": "In step 3 on Stack Overflow, remove all entries in the '.git/packed-refs' file except for the one that has 'master' on it.", "group_id": 9127, "id": 881336}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304323267.830946, "message": "If you are going to reduce the original repo size, I *highly* recommend making a clean, temporary clone of the repo and perform all of your removes in there.  (Then of course, merge from this repo locally.)  This prevents you from messing up your main development repository.", "group_id": 9127, "id": 881366}, {"user_id": 30471, "stars": [], "topic_id": 33144, "date_created": 1304344346.0581219, "message": "http://stackoverflow.com/questions/5724522/creating-github-repository-with-only-a-subset-of-a-local-repositorys-history might be a more effective way of cloning your code.", "group_id": 9127, "id": 883110}, {"user_id": 30471, "stars": [], "topic_id": 33144, "date_created": 1304344811.9506221, "message": "It will let you clone your current branch without any history, but it lets you locally view all the prior history of your code.", "group_id": 9127, "id": 883220}, {"user_id": 30471, "stars": [], "topic_id": 33144, "date_created": 1304344975.2618611, "message": "So what you should probably do is create a new branch \"pyne-local\", do all your removes and stuff there, commit, then \"git checkout --orphan pyne\", then commit, then do git replace.", "group_id": 9127, "id": 883265}, {"user_id": 30471, "stars": [], "topic_id": 33144, "date_created": 1304345723.026871, "message": "This is a lot safer, too. Just don't push --tags to github, and other caveats listed in the script.", "group_id": 9127, "id": 883422}, {"user_id": 10411, "stars": [], "topic_id": 33144, "date_created": 1304348598.3420351, "message": "@sethrj Very cool.  I wanted to retain the history, personally, but this is a great option if you don't!", "group_id": 9127, "id": 884249}]