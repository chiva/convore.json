[{"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302555647.2671311, "message": "there's also a settings evaluation at compile time. SERVICES and IMPROVIDERS could probably be left without the STATIC_URL reference since we have STATIC_URL available in the templates", "group_id": 8618, "id": 629953}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1302554232.9764791, "message": "@brutasse I've created a ``staticfiles`` branch based on current master. I've done a preliminary integration of django.contrib.staticfiles. Could you review it and merge, if you're happy with it?", "group_id": 8618, "id": 629551}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1302554271.1256149, "message": "(It doesn't include a STATIC_ROOT setting in default_settings.py, that'll need to be set up on whatever the deployment target is).", "group_id": 8618, "id": 629557}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302555283.9622099, "message": "and references to static files become {{ STATIC_URL }}djangopeople/{img,css,js}", "group_id": 8618, "id": 629823}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1302554243.610292, "message": "... and of course, let me know if/what I've missed :)", "group_id": 8618, "id": 629553}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302555238.7703209, "message": "@danfairs I think the static files should go to a djangopeople/static/djangopeople directory, so that we don't have to touch STATICFILES_DIRS. Currently we can't use os.path.join(OUR_ROOT, 'static') as STATIC_ROOT", "group_id": 8618, "id": 629807}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302555367.080961, "message": "also MEDIA_ROOT should probably be changed to os.path.join(OUR_ROOT, 'media')", "group_id": 8618, "id": 629858}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302555426.6670499, "message": "this way we don't have that top-level 'static' directory during development", "group_id": 8618, "id": 629876}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302555807.2316451, "message": "... to serve media files during development as well", "group_id": 8618, "id": 629982}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302555761.8000309, "message": "the 'if settings.DEBUG' check in the urls.py is redundant, staticfiles_urlpatterns() already checks that. you can do something like:", "group_id": 8618, "id": 629974}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302555787.929781, "message": "from django.conf.urls.static import static\nurlpatterns += staticfiles_urlpatterns()\nurlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)", "group_id": 8618, "id": 629978}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302558090.162771, "message": "so you have it only in production? that makes sense", "group_id": 8618, "id": 630592}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1302557989.762248, "message": "I personally never have STATIC_ROOT within the project, which is why I omitted it :)", "group_id": 8618, "id": 630571}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1302557972.403641, "message": "OK, happy to move the top-level static directory.", "group_id": 8618, "id": 630568}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1302558490.2132411, "message": "\"This view is automatically enabled and will serve your static files at STATIC_URL when you use the built-in runserver management command.\"", "group_id": 8618, "id": 630671}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1302558485.8416951, "message": "@brutasse If I'm reading the Django docs right, adding staticfiles_urlpatterns() isn't necessary for development", "group_id": 8618, "id": 630670}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1302558497.3828549, "message": "http://docs.djangoproject.com/en/dev/howto/static-files/#staticfiles-development", "group_id": 8618, "id": 630674}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302558548.3707321, "message": "@bezidejni it's not strictly required but useful if you don't use runserver but gunicorn or the werkzeug debugger", "group_id": 8618, "id": 630687}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1302558627.2895751, "message": "Sure, makes sense.", "group_id": 8618, "id": 630700}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1302558662.270735, "message": "Oh yeah, another question: why djangopeople/static/djangopeople for static files? Isn't djangopeople/static enough?", "group_id": 8618, "id": 630710}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302558714.4427531, "message": "it could be, but if you have djangopeople/static/style.css and otherapp/static/style.css they overlap", "group_id": 8618, "id": 630730}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302558745.4368701, "message": "so it's like with template, safer to prefix them with the app name to avoid conflicts", "group_id": 8618, "id": 630740}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302637431.9177051, "message": "(in javascript)", "group_id": 8618, "id": 648448}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1302636216.2784109, "message": "OK - I made the modifications you suggested, @brutasse - all made sense. I actually introduced STATIC_ROOT as well; I think this site will have value as a teaching tool, and there seems to be a lot of confusion around about the difference between STATIC_ROOT, MEDIA_ROOT, STATIC_URL and MEDIA_URL", "group_id": 8618, "id": 647978}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302637421.8470781, "message": "this way we can do greenIcon.image = STATIC_URL + \"djangopeople/img/green-bubble.png\";", "group_id": 8618, "id": 648438}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1302636231.3028691, "message": "Hopefully being able to point to this as an example will be useful.", "group_id": 8618, "id": 647987}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1302636262.0211101, "message": "Anyway - let me know if you or @bezidejni have any more feedback!", "group_id": 8618, "id": 647997}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302637540.3149979, "message": "also the master branch probably needs to be merged in the staticfiles branch, it has the gmaps-v3 changes", "group_id": 8618, "id": 648499}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302637321.8201799, "message": "Looking at it now :)", "group_id": 8618, "id": 648400}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302637338.2712121, "message": "there is an issue with a hardcoded URL in a javsacript file", "group_id": 8618, "id": 648407}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302637344.930999, "message": "greenIcon.image = \"/static/img/green-bubble.png\"", "group_id": 8618, "id": 648412}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302637402.5160971, "message": "to make the js files STATIC_URL-aware the best solution is probably to put var STATIC_URL = '{{ STATIC_URL }}'; in the base.html template", "group_id": 8618, "id": 648432}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302637484.0112469, "message": "http://dpaste.com/531373/", "group_id": 8618, "id": 648474}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1302637742.8063641, "message": "the last thing would be this (http://dpaste.com/531375/) to serve avatars", "group_id": 8618, "id": 648618}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1302638114.0533979, "message": "It's a nice solution, +1", "group_id": 8618, "id": 648778}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1303412501.834729, "message": "@brutasse Sorry, I'm just getting to that now - and your dpaste has gone! Could you repaste that for me please?", "group_id": 8618, "id": 774337}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1303454026.071101, "message": "It was a URL pattern to serve Media files", "group_id": 8618, "id": 779547}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1303454072.2636449, "message": "from django.conf.urls.static import static; urlpatterns +=  static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)", "group_id": 8618, "id": 779554}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1303654481.5705571, "message": "Perfect - thanks.", "group_id": 8618, "id": 794911}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1303654549.9641421, "message": "@bezidejni, it might be good if you could quickly review that branch - the merge should be OK, but it was the gmap changes that resulted in the conflicts - a quick sanity check would be appreciated!", "group_id": 8618, "id": 794919}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1303654501.0464571, "message": "I'll put that it; I've also merged master into staticfiles, as you suggested (and resolved the conflicts)", "group_id": 8618, "id": 794912}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1303654660.019134, "message": "Sure, I'll check it out.", "group_id": 8618, "id": 794925}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1303658726.643297, "message": "Also, I'll need to fix something in maps code on profile page, but I'll do that when you merge the changes into master", "group_id": 8618, "id": 795308}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1303658663.5548279, "message": "Looks good to me, you only forgot to include the line that @brutasse mentioned earlier, the one for serving media files in development", "group_id": 8618, "id": 795303}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1304015689.3296249, "message": "So we have a record of it here, too - I ended up adding a {% get_static_prefix as STATIC_URL %} to the base template. I realised, after @bezidejni said he didn't realise that all views were using RequestContext, that they actually weren't ;)", "group_id": 8618, "id": 845013}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1304014147.1048801, "message": "OK - done. Let me know if there's anything else that needs tweaking, else I'll merge.", "group_id": 8618, "id": 844707}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1304015720.5749791, "message": "Specifically, the OpenID views in django_openidauth  and openidconsumer don't.", "group_id": 8618, "id": 845021}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1304019950.7272379, "message": "@danfairs, feel free to merge it.", "group_id": 8618, "id": 846343}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1304019884.4107771, "message": "Yeah, the code was inconsistent. In the djangopeople views.py, render was a method that added RequestContext to the response and in the OpenID views it was used as an alias to render_to_response :/", "group_id": 8618, "id": 846324}, {"user_id": 24018, "stars": [], "topic_id": 18684, "date_created": 1304022227.744529, "message": "I updated the code, all views should be using RequestContext now.", "group_id": 8618, "id": 846777}, {"user_id": 1167, "stars": [], "topic_id": 18684, "date_created": 1304422948.6139021, "message": "Thanks for the merge @danfairs :)", "group_id": 8618, "id": 896703}, {"user_id": 25337, "stars": [], "topic_id": 18684, "date_created": 1304434311.173892, "message": "np - sorry it's taken a while! Got a lot on right now.", "group_id": 8618, "id": 898714}]