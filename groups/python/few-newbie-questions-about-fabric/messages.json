[{"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299684145.709749, "message": "ah so I am using the wrong tool then?", "group_id": 292, "id": 305900}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299682241.113266, "message": "Are context managers only for ssh or do they work with local too?", "group_id": 292, "id": 305150}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299682148.2753551, "message": "What's the starting path of fabric for local()?", "group_id": 292, "id": 305109}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299682457.8268931, "message": "Already got stuck with source env/bin/activate so that's why I asked what the starting path is.", "group_id": 292, "id": 305226}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299682425.6307981, "message": "At the moment I am trying to do something like fab start. This will activate the virtualenv and run a coffeescript watcher.", "group_id": 292, "id": 305215}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299684237.5350349, "message": "Okay, will do. Thanks", "group_id": 292, "id": 305941}, {"user_id": 214, "stars": [], "topic_id": 11706, "date_created": 1299684110.749032, "message": "You aren't going to be able to activate a virtualenv via fabric. Fabric runs stuff in subshells, bin/activate has to modify your current shell.", "group_id": 292, "id": 305886}, {"user_id": 214, "stars": [], "topic_id": 11706, "date_created": 1299684198.190027, "message": "Not much point in using fabric to script local stuff, just use bash. Fabric shines for remote systems, especially when you have lots of them.", "group_id": 292, "id": 305923}, {"user_id": 214, "stars": [], "topic_id": 11706, "date_created": 1299684293.2751811, "message": "Sure.", "group_id": 292, "id": 305990}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299688986.688844, "message": "(also, see the Fabric convore group, https://convore.com/fabric/ )", "group_id": 292, "id": 306649}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299688911.4299159, "message": "For what it's worth, Fabric can fake stateful things (provided they are idempotent) by using the prefix() contextmanager. Right now it only applies to run/sudo, but the overall approach (tacking on an e.g. \"env/bin/activate && \" before your commands) would work for local() as well.", "group_id": 292, "id": 306640}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299688959.054996, "message": "(For interfacing with Python code and sprinkling in some shell calls, though, Fabric is good.)", "group_id": 292, "id": 306647}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299690697.8779399, "message": "@carljm Quite true; I always forget about the explicit script/bin path angle because I'm always using virtualenvwrapper interactively. (I don't normally script this sort of thing myself.)", "group_id": 292, "id": 306815}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299688941.8268459, "message": "That said, @carljm is right that if you're doing nothing but local calls *and* you don't need Python level code much, a bash script will do you fine and be more flexible.", "group_id": 292, "id": 306646}, {"user_id": 214, "stars": [{"date_created": 1299690662.2016439, "user_id": 4156}], "topic_id": 11706, "date_created": 1299690097.989783, "message": "@bitprophet For using a virtualenv from fabric, explicitly using its binaries/scripts is better than repeated prefixing with activate. More reliable and explicit.", "group_id": 292, "id": 306739}, {"user_id": 214, "stars": [], "topic_id": 11706, "date_created": 1299690423.397814, "message": "Also, @Enome was (in my reading) trying to set up a shell environment for further work", "group_id": 292, "id": 306791}, {"user_id": 214, "stars": [], "topic_id": 11706, "date_created": 1299690527.5419071, "message": "@Enome you might want to look into virtualenvwrapper and post-activate scripts (for running your coffeescript watcher).", "group_id": 292, "id": 306799}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299703977.5131171, "message": "it'll get better :)", "group_id": 292, "id": 308240}, {"user_id": 19652, "stars": [], "topic_id": 11706, "date_created": 1299698580.0110619, "message": "@bitprophet  @carljm yea full paths are awesome. Specially if you can construct them up front. I use them in conjunction with path.py and it's really nice to write stuff like \"%(pip)s install %(package)\" % locals()", "group_id": 292, "id": 307614}, {"user_id": 19652, "stars": [], "topic_id": 11706, "date_created": 1299698639.4396961, "message": "Honestly we use local() almost exclusively at one of our projects and it's really nice to have the logic of python rather than a shell script. I know it's the *wrong* way to use fabric but our boss didn't wanted remote deployment like that so we checkout the fabfile and run everything locally.", "group_id": 292, "id": 307617}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299703956.16171, "message": "It's not really wrong per se, I always considered fabric to be a hybrid between ssh and makefiley stuff -- even though the focus has been mostly on the former so far", "group_id": 292, "id": 308238}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299713381.4448011, "message": "There's some really good info in here. Going to test some more. I already installed virtualenvwrapper and it sure is a little easier to work with.", "group_id": 292, "id": 309297}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299715681.7812719, "message": "@Enome Depends how you installed virtualenvwrapper and what your local system is (ubuntu, OS X etc)", "group_id": 292, "id": 309483}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299714699.1522739, "message": "def start():\n\twith prefix('workon porks'):\n\t\tlocal('python porks/manage.py runserver')\n", "group_id": 292, "id": 309398}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299714716.215148, "message": "It says /bin/sh: workon: not found", "group_id": 292, "id": 309399}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299714726.4129031, "message": "Any reason why it does that?", "group_id": 292, "id": 309400}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299717106.810215, "message": "I know some folks have run into problems lately where /bin/sh (the local/subprocess default) is not linked as their default login shell (eg /bin/bash)", "group_id": 292, "id": 309575}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299747097.711307, "message": "ah, I see. Going to investigate that some more.", "group_id": 292, "id": 311979}, {"user_id": 8490, "stars": [], "topic_id": 11706, "date_created": 1299748546.0431769, "message": "Seems on Ubuntu sh points to dash instead of bash.", "group_id": 292, "id": 312091}, {"user_id": 17897, "stars": [], "topic_id": 11706, "date_created": 1299749747.799159, "message": "and has done so since 6.10 as far as I can tell.", "group_id": 292, "id": 312164}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299764626.258713, "message": "So yea, this will continue to be a problem for Ubuntu users until we A) expose the subprocess shell kwarg and B) probably force it to default to /bin/bash (though that's not a done deal as it could be considered backwards incompatible)", "group_id": 292, "id": 313296}, {"user_id": 4156, "stars": [], "topic_id": 11706, "date_created": 1299764649.541858, "message": "See also http://code.fabfile.org/issues/show/178", "group_id": 292, "id": 313297}]