[{"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300465158.9108889, "message": "I'm going more with a full chef-server setup", "group_id": 4606, "id": 383226}, {"user_id": 13919, "stars": [], "topic_id": 13797, "date_created": 1300465939.76122, "message": "or to never close the window and just here that bell chiming all day!", "group_id": 4606, "id": 383366}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300464545.2260661, "message": "Hey @fnicol, I'm re-doing my chef infrastructure(my existing stuff is on 0.8/centos), and I've got the chance to move over to 0.9 and ubuntu, I saw you had a bunch of chef stuff setup already", "group_id": 4606, "id": 383152}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465239.853627, "message": "On vagrant VMs for development I've been installing an official packaged ruby (via apt) and usually a form-source rubygems to install the current chef gem. Then I have an RVM cookbook to install/manage RVM which is what I really use across the system (https://github.com/fnichol/chef-rvm)", "group_id": 4606, "id": 383235}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465294.383822, "message": "But in both cases, I'm using my chef/RVM cookbook to set my default/installed rubies, gemsets, wrappers or anything else I need", "group_id": 4606, "id": 383238}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465114.2224939, "message": "On external systems (metal, cloud, etc.) I've been using a gem I made to install RVM with the minimal packages required to build an mri/ree ruby and install chef (https://github.com/fnichol/capstrap). It's using capistrano so there aren't any host requirements other than ssh (as root with an ssh key initially). Right now I've only really cared about Ubuntu with capstrap", "group_id": 4606, "id": 383222}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465343.988714, "message": "So will your chef-client hosts come out of a prepared image with the chef gem installed? Or do they need to get bootstrapped from a std Ubuntu server install?", "group_id": 4606, "id": 383246}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465830.0340979, "message": "so capstrap just dumps out RVM/ree, but then chef manages RVM and ree longterm after that", "group_id": 4606, "id": 383331}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300465590.0650289, "message": "so you end up with 2 rubies, the system ruby, and then nginx/passenger/rvm which runs the apps?", "group_id": 4606, "id": 383280}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466228.798527, "message": "@x0nic I'd guess that we're looking at April 19 now for the next meetup", "group_id": 4606, "id": 383435}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465119.6515989, "message": "...cont'd...", "group_id": 4606, "id": 383223}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300465912.3450539, "message": "the fact that this conversation is archived under an appropriate topic is great", "group_id": 4606, "id": 383354}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300464665.747354, "message": "Do you use RVM for your system ruby on the nodes managed by chef?  Or system ruby?", "group_id": 4606, "id": 383166}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466011.4809301, "message": "@SeanOuimet yeah, I figured I was going to give that (RVM system-wide) a go since that was the original design goal of RVM", "group_id": 4606, "id": 383385}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465045.1006229, "message": "@Blaze you bet, been spending waaay too much time with chef, but it's addictive. I've been running with RVM installed system wide on my systems with good results. Only catch is where/how do you get chef (with a ruby) to bootstrap? I have 2 approaches... (con't)", "group_id": 4606, "id": 383214}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465396.3584881, "message": "I've been using Linode and Slicehost so I have to build up to RVM/ruby/chef (hence this capstrap gem). Otherwise, if I was using AWS then I'd have ruby/chef ready to go", "group_id": 4606, "id": 383253}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465662.094254, "message": "Yeah, that's basically what I built capstrap for. It primarily: (1) sets the hostname/domainname for ohai to work properly, (2) installs min. packages required for RVM, (3) does an RVM system-wide install, (4) installs min packages for a ruby, (5) builds the ruby (ree by default), (6) installs the chef gem, (7) optionally pulls down a chef repo for chef-solo, (8) optionally pulls down a chef-solo config, (9) optionally executes chef-solo", "group_id": 4606, "id": 383294}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465772.7147231, "message": "on my \"metal\" systems i'd use capstrap which leaves me with 1 ruby (RVM/ree) and then my nginx/passenger/etc. cookbooks are RVM-aware and most use RVM/ree by default as well. So in the end on \"metal\" servers, only 1 ruby. Of course unless you tell it to install more :)", "group_id": 4606, "id": 383317}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300465798.91626, "message": "ahh, nice", "group_id": 4606, "id": 383322}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465799.246635, "message": "flipping odd, isn't it? Managing rubies from ruby.", "group_id": 4606, "id": 383323}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300467133.7454319, "message": "@SeanOuimet esp. compiling ree or something like that. That's usually the most painful part", "group_id": 4606, "id": 383572}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300465431.88205, "message": "I'm right on the metal, so starting from an ubuntu server install", "group_id": 4606, "id": 383257}, {"user_id": 13919, "stars": [], "topic_id": 13797, "date_created": 1300465925.0291641, "message": "@fnichol awesome! I'll talk to you offline about the best way to demo it", "group_id": 4606, "id": 383359}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300466581.530633, "message": "ok @fnichol I'm just getting vagrant up and running", "group_id": 4606, "id": 383506}, {"user_id": 4009, "stars": [], "topic_id": 13797, "date_created": 1300465808.538286, "message": "@fnichol Thats awesome. I have been having problems getting chef server installed. So i have been using the ops code platform for now. Ill have to give capstrap a try now.", "group_id": 4606, "id": 383328}, {"user_id": 13919, "stars": [{"date_created": 1300465846.59144, "user_id": 21856}, {"date_created": 1300465941.421484, "user_id": 4009}, {"date_created": 1300466824.8298969, "user_id": 14826}], "topic_id": 13797, "date_created": 1300465831.478914, "message": "@fnichol you need to do a talk on all this stuff one day. it would be great to see in action!", "group_id": 4606, "id": 383333}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300465864.6546631, "message": "@fnicol that sounds like a good setup", "group_id": 4606, "id": 383337}, {"user_id": 13919, "stars": [], "topic_id": 13797, "date_created": 1300466249.9936371, "message": "@x0nic they're always on the third tuesday of each month.", "group_id": 4606, "id": 383444}, {"user_id": 13919, "stars": [], "topic_id": 13797, "date_created": 1300466273.2762129, "message": "So the next one is going to be April 19th. Location TBD", "group_id": 4606, "id": 383450}, {"user_id": 21846, "stars": [], "topic_id": 13797, "date_created": 1300466430.496417, "message": "on a random side question:  has anybody played with unicorn for deployment?  Recent deploys for me have been REE + Apache.  I've tried REE + Nginx, but had an obscure (known) bug get in my way which led to a lot of wasted time.", "group_id": 4606, "id": 383482}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465869.42413, "message": "@MarkBennett done, next meetup where this is appropriate I will talk about some aspect of all of this", "group_id": 4606, "id": 383338}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300465897.5924489, "message": "@MarkBennett also I'm kind of sold on convore now", "group_id": 4606, "id": 383351}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465917.876332, "message": "haha, I know, it's addicting to login and see new topics come up", "group_id": 4606, "id": 383357}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300465969.491466, "message": "@MarkBennett sure thing. I'm using all of this with Vagrant to prototype chef cookbooks and to use VMs for staging testing. So it's all a big bag of related coolness for me now", "group_id": 4606, "id": 383377}, {"user_id": 21846, "stars": [], "topic_id": 13797, "date_created": 1300465947.277113, "message": "I just came online to discuss a similar thing.... system wide RVM on production server", "group_id": 4606, "id": 383368}, {"user_id": 21846, "stars": [], "topic_id": 13797, "date_created": 1300466068.9325531, "message": "@fnichol I've done it before, it just requires a little extra prep... though I also like the idea of isolating it to one user in some other ways.", "group_id": 4606, "id": 383394}, {"user_id": 4009, "stars": [], "topic_id": 13797, "date_created": 1300466000.3124261, "message": "@fnichol When is the next meetup, anyways?", "group_id": 4606, "id": 383383}, {"user_id": 21846, "stars": [], "topic_id": 13797, "date_created": 1300466005.4889419, "message": "was debating just setting up RVM under a \"rubyworker\" user, versus a root install of the rvm components", "group_id": 4606, "id": 383384}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466519.5678151, "message": "@SeanOuimet haven't gone the unicorn way (yet). So far I've been using nginx/ree/passenger myself and apache2/ree/passenger at MacEwan", "group_id": 4606, "id": 383498}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300466590.516479, "message": "so I'll use it against that and let you know how it goes", "group_id": 4606, "id": 383508}, {"user_id": 21846, "stars": [], "topic_id": 13797, "date_created": 1300467179.369539, "message": "@fnichol I suspect a reboot in the near future....", "group_id": 4606, "id": 383580}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466154.6020961, "message": "@SeanOuimet from hanging out in #rvm on freenode it seems like @wayneeseguin uses that strategy (each user has it's own RVM install with rubies/gemsets). I just liked the cleaness of one RVM install for installing other dependant services. However... I'm trying to figure out how to manage per-user RVM in my cookbook. I'd like special application users like Jenkins/Hudson to have their own ruby world for CI/testing and not sully system-wide", "group_id": 4606, "id": 383421}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466366.104156, "message": "@Blaze you are the first person (that I know about) using that capstrap gem so ping me if you're confused or it's acting strange. It's primarily geared to chef-solo, but it should be easy to remove the solo-specific steps with a flag", "group_id": 4606, "id": 383474}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466591.810235, "message": "@Blaze whoops, yes with capstrap you only need to run the chef task which stops short of the colo stuff 'capstrap chef root@zland'", "group_id": 4606, "id": 383509}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466244.6429, "message": "does that sound right, @MarkBennett", "group_id": 4606, "id": 383440}, {"user_id": 13919, "stars": [], "topic_id": 13797, "date_created": 1300466344.5699201, "message": "@fnichol I've use rvm wrap to isolate rvm rubies belonging to different users and gemsets. would that help?", "group_id": 4606, "id": 383468}, {"user_id": 21846, "stars": [], "topic_id": 13797, "date_created": 1300467064.3175011, "message": "(why did I decide to do prelim setup of this AWS image on a micro... slow compile times. oh well...)", "group_id": 4606, "id": 383562}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466445.7478421, "message": "@MarkBennett yeah, I found that really does help. Esp. for processes and scripts that just don't understand RVM by default. I used wrappers all over the place when I built a gitorious cookbook", "group_id": 4606, "id": 383485}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466890.464118, "message": "@Blaze I don't think you'll have that concern, but with vagrant boxes I didn't want to bother having to install the chef gem a second time in the RVM ruby; I just wanted vagrant to find system/ruby's chef-solo the second provision run.", "group_id": 4606, "id": 383550}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300466808.481488, "message": "@Blaze sure thing. There was one catch I found with vagrant and capstrap. Once capstrap is finished you'll be using RVM/ree's chef gem rather than system chef's gem. Not a big deal but if you only wanted chef installed in system then vagrant can't find chef-solo anymore. But I made a cookbook that fixes that :) https://github.com/fnichol/chef-vagrant_extras", "group_id": 4606, "id": 383535}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300469833.27491, "message": "@fnichol capstrap: A++ gem, would recommend again", "group_id": 4606, "id": 384167}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300474083.5920961, "message": "@Blaze awesome possum, great to hear!", "group_id": 4606, "id": 384617}, {"user_id": 4009, "stars": [], "topic_id": 13797, "date_created": 1300813259.809427, "message": "Can you change the port capstrap uses?", "group_id": 4606, "id": 409088}, {"user_id": 21834, "stars": [], "topic_id": 13797, "date_created": 1300827646.2877741, "message": "You can use your ~/.ssh/config to change the ports so when capstrap sshs into the host it uses a different port", "group_id": 4606, "id": 411761}, {"user_id": 4009, "stars": [], "topic_id": 13797, "date_created": 1300832177.1296489, "message": "@Blaze Yeah, I was thinking of doing that.", "group_id": 4606, "id": 412341}, {"user_id": 21844, "stars": [], "topic_id": 13797, "date_created": 1300931574.7022769, "message": "whoops, convore! oh yeah! good question, @Blaze is right about hacking your .ssh/config, but i could add an argument parse like root@mybox.com:2022 to do the right thing", "group_id": 4606, "id": 422729}]